# Node Environment
NODE_ENV=development

# Specify port for dealbot service (optional)
DEALBOT_PORT=8080

# Specify host for dealbot service (optional)
DEALBOT_HOST=localhost

# Comma-separated list of allowed origins for CORS (for web dev)
DEALBOT_ALLOWED_ORIGINS=http://localhost:5173,http://127.0.0.1:5173

# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=dealbot
DATABASE_PASSWORD=dealbot_password
DATABASE_NAME=filecoin_dealbot

# Blockchain Configuration
NETWORK=calibration # or mainnet
WALLET_ADDRESS=0x0000000000000000000000000000000000000000
WALLET_PRIVATE_KEY=your_private_key_here
CHECK_DATASET_CREATION_FEES=true
ENABLE_IPNI_TESTING=true
USE_ONLY_APPROVED_PROVIDERS=true

# Dataset Versioning (optional)
# Uncomment and set to enable dataset versioning (e.g., "dealbot-v1", "dealbot-v2")
# This allows creating new logical datasets without changing wallet addresses
# DEALBOT_DATASET_VERSION=dealbot-v1

# Scheduling Configuration
# Intervals: How often jobs run (in seconds)
DEAL_INTERVAL_SECONDS=1800        # Run deal creation every 30 minutes
RETRIEVAL_INTERVAL_SECONDS=3600   # Run retrieval tests every 60 minutes

# Offsets: Delay before first job execution (in seconds) - prevents concurrent execution
DEAL_START_OFFSET_SECONDS=0       # Deal creation starts immediately
RETRIEVAL_START_OFFSET_SECONDS=300  # Retrieval tests start 5 minutes after deals
METRICS_START_OFFSET_SECONDS=600    # Metrics jobs start 10 minutes after deals
# Maintenance windows (UTC)
DEALBOT_MAINTENANCE_WINDOWS_UTC=07:00,22:00
DEALBOT_MAINTENANCE_WINDOW_MINUTES=20

# pg-boss (DB-backed jobs) Configuration
# See docs/environment-variables.md for details, limits, and fractional examples.
DEALBOT_JOBS_MODE=pgboss
DEALS_PER_SP_PER_HOUR=2
RETRIEVALS_PER_SP_PER_HOUR=1
METRICS_PER_HOUR=2
PG_BOSS_LOCAL_CONCURRENCY=20
JOB_SCHEDULER_POLL_SECONDS=300
JOB_WORKER_POLL_SECONDS=60
JOB_CATCHUP_MAX_ENQUEUE=10
JOB_SCHEDULE_PHASE_SECONDS=0
JOB_ENQUEUE_JITTER_SECONDS=0
DEAL_JOB_TIMEOUT_SECONDS=360          # 6m: Max runtime for deal jobs (TODO: reduce default to 3m)
RETRIEVAL_JOB_TIMEOUT_SECONDS=60     # 1m: Max runtime for retrieval jobs (TODO: reduce default to 30s)
DEALBOT_PGBOSS_POOL_MAX=1
DEALBOT_PGBOSS_SCHEDULER_ENABLED=true

# Dataset Configuration
DEALBOT_LOCAL_DATASETS_PATH=./datasets
KAGGLE_DATASET_TOTAL_PAGES=500

# Proxy Configuration
PROXY_LIST=http://username:password@host:port,http://username:password@host:port
PROXY_LOCATIONS=l1,l2

# Timeout Configuration (in milliseconds)
CONNECT_TIMEOUT_MS=10000             # 10s: Initial connection timeout
HTTP_REQUEST_TIMEOUT_MS=240000       # 4m: Total transfer timeout for HTTP/1.1 (10MiB @ 170KB/s + overhead)
HTTP2_REQUEST_TIMEOUT_MS=240000      # 4m: Total transfer timeout for HTTP/2 (10MiB @ 170KB/s + overhead)
